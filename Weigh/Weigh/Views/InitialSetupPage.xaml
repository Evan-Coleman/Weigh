<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Weigh.Views.InitialSetupPage"
             xmlns:b="clr-namespace:Weigh.Behaviors"
             Title="{Binding Title}">

    <StackLayout HorizontalOptions="CenterAndExpand" VerticalOptions="CenterAndExpand">
        <Entry Text="{Binding Name}"
               Placeholder="Enter Name Here"
               Style="{ StaticResource SetupEntryStyle }"
               x:Name="Name"/>
        <StackLayout Orientation="Horizontal"
                     HorizontalOptions="CenterAndExpand"
                     Padding="0">
            <Label Text="Male"/>
            <Switch IsToggled="{Binding Sex}"/>
            <Label Text="Female"/>
        </StackLayout>
        <Entry Text="{Binding Age}"
               Placeholder="Age"
               Style="{ StaticResource SetupEntryStyle }"
               x:Name="Age"
               Keyboard="Numeric">
            <Entry.Behaviors>
                <b:NumericValidatorBehavior />
            </Entry.Behaviors>
        </Entry>
        <Entry Text="{Binding HeightMajor}"
               Placeholder="Height (ft)"
               Style="{ StaticResource SetupEntryStyle }"
               x:Name="HeightMajor"
               Keyboard="Numeric">
            <Entry.Triggers>
                <DataTrigger TargetType="Entry"
                     Binding="{Binding Source={x:Reference UnitSwitch},
                                       Path=IsToggled}"
                     Value="false">
                    <Setter Property="Placeholder" Value="Height (cm)" />
                </DataTrigger>
            </Entry.Triggers>
            <Entry.Behaviors>
                <b:NumericValidatorBehavior />
            </Entry.Behaviors>
        </Entry>
        <Entry Text="{Binding HeightMinor}"
               Placeholder="Height (in)"
               Style="{ StaticResource SetupEntryStyle }"
               x:Name="HeightMinor"
               IsVisible="{Binding Units}"
               Keyboard="Numeric">
            <Entry.Behaviors>
                <b:NumericValidatorBehavior />
            </Entry.Behaviors>
        </Entry>
        <Entry Text="{Binding Weight}"
               Placeholder="Weight (lb)"
               Style="{ StaticResource SetupEntryStyle }"
               x:Name="Weight"
               Keyboard="Numeric">
            <Entry.Triggers>
                <DataTrigger TargetType="Entry"
                     Binding="{Binding Source={x:Reference UnitSwitch},
                                       Path=IsToggled}"
                     Value="false">
                    <Setter Property="Placeholder" Value="Weight (kg)" />
                </DataTrigger>
            </Entry.Triggers>
            <Entry.Behaviors>
                <b:NumericValidatorBehavior />
            </Entry.Behaviors>
        </Entry>
        <Entry Text="{Binding WaistSize}"
               Placeholder="Waist Size (in)"
               Style="{ StaticResource SetupEntryStyle }"
               x:Name="WaistSize"
               Keyboard="Numeric">
            <Entry.Triggers>
                <DataTrigger TargetType="Entry"
                     Binding="{Binding Source={x:Reference UnitSwitch},
                                       Path=IsToggled}"
                     Value="false">
                    <Setter Property="Placeholder" Value="Waist Size (cm)" />
                </DataTrigger>
            </Entry.Triggers>
            <Entry.Behaviors>
                <b:NumericValidatorBehavior />
            </Entry.Behaviors>
        </Entry>
        <Picker ItemsSource="{Binding PickerSource}"
                SelectedItem="{Binding PickerSelectedItem}"
                Title="Level of Activity"
                WidthRequest="150"/>

        <Entry Text="{Binding GoalWeight}"
               Placeholder="Goal Weight (lb)"
               Style="{ StaticResource SetupEntryStyle }"
               x:Name="GoalWeight"
               Keyboard="Numeric">
            <Entry.Triggers>
                <DataTrigger TargetType="Entry"
                     Binding="{Binding Source={x:Reference UnitSwitch},
                                       Path=IsToggled}"
                     Value="false">
                    <Setter Property="Placeholder" Value="Goal Weight (kg)" />
                </DataTrigger>
            </Entry.Triggers>
            <Entry.Behaviors>
                <b:NumericValidatorBehavior />
            </Entry.Behaviors>
        </Entry>

        <DatePicker Date="{Binding GoalDate}"
                    MinimumDate="{Binding MinDate}"></DatePicker>


        <StackLayout Orientation="Horizontal"
                     HorizontalOptions="CenterAndExpand"
                     Padding="0">
            <Label Text="Metric"/>
            <Switch IsToggled="{Binding Units}"
                    x:Name="UnitSwitch"/>
            <Label Text="Imperial"/>
        </StackLayout>
        <Button Text="Save"
                Command="{Binding SaveInfoCommand}"
                WidthRequest="150">
            <Button.Triggers>
                <DataTrigger TargetType="Button"
                     Binding="{Binding Source={x:Reference Age},
                                       Path=TextColor}"
                     Value="Color.Red">
                    <Setter Property="IsEnabled" Value="False" />
                </DataTrigger>
                <DataTrigger TargetType="Button"
                     Binding="{Binding Source={x:Reference HeightMajor},
                                       Path=TextColor}"
                     Value="Color.Red">
                    <Setter Property="IsEnabled" Value="False" />
                </DataTrigger>
                <DataTrigger TargetType="Button"
                     Binding="{Binding Source={x:Reference HeightMinor},
                                       Path=TextColor}"
                     Value="Color.Red">
                    <Setter Property="IsEnabled" Value="False" />
                </DataTrigger>
                <DataTrigger TargetType="Button"
                     Binding="{Binding Source={x:Reference Weight},
                                       Path=TextColor}"
                     Value="Color.Red">
                    <Setter Property="IsEnabled" Value="False" />
                </DataTrigger>
            </Button.Triggers>

        </Button>
    </StackLayout>

</ContentPage>